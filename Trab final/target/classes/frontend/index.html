<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Banco de Sangue - Gestão Completa</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1>Banco de Sangue</h1>
                <p>Sistema Completo</p>
            </div>
            <div class="sidebar-nav">
                <a href="#" onclick="showTab('pessoas')" class="active"> Pessoas</a>
                <a href="#" onclick="showTab('doacoes')"> Doações</a>
                <a href="#" onclick="showTab('estoque')"> Estoque</a>
                <a href="#" onclick="showTab('dashboard')"> Dashboard</a>
                <a href="#" onclick="showTab('compatibilidade')"> Compatibilidade</a>
            </div>
        </nav>

        <main class="main-content">
            <div class="content-header">
                <h1 id="pageTitle">Gestão de Pessoas e Doadores</h1>
                <p id="pageDescription">Cadastro e consulta de doadores</p>
            </div>

            <!-- Alertas -->
            <div class="alert alert-success hidden" id="successAlert"></div>
            <div class="alert alert-danger hidden" id="errorAlert"></div>
            <div class="alert alert-warning hidden" id="warningAlert"></div>


            <!-- PESSOAS -->
            <div id="tab-pessoas" class="tab-content active">
                <div class="main-content-inner">
                    <section class="form-section">
                        <h2 id="pessoaFormTitle">Cadastrar Pessoa</h2>
                        <form id="personForm">
                            <input type="hidden" id="personId">

                            <div class="form-group">
                                <label for="nome">Nome Completo *</label>
                                <input type="text" id="nome" required>
                            </div>

                            <div class="form-group">
                                <label for="tipoSanguineo">Tipo Sanguíneo</label>
                                <select id="tipoSanguineo">
                                    <option value="">Selecione</option>
                                    <option value="A_POSITIVO">A+</option>
                                    <option value="A_NEGATIVO">A-</option>
                                    <option value="B_POSITIVO">B+</option>
                                    <option value="B_NEGATIVO">B-</option>
                                    <option value="AB_POSITIVO">AB+</option>
                                    <option value="AB_NEGATIVO">AB-</option>
                                    <option value="O_POSITIVO">O+</option>
                                    <option value="O_NEGATIVO">O-</option>
                                </select>
                            </div>

                            <h3>Endereço</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="cep">CEP</label>
                                    <input type="text" id="cep" placeholder="00000-000">
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn btn-primary" onclick="consultarCEP()"
                                        style="margin-top: 25px;">Buscar CEP</button>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="logradouro">Logradouro *</label>
                                    <input type="text" id="logradouro" required>
                                </div>
                                <div class="form-group">
                                    <label for="numero">Número *</label>
                                    <input type="text" id="numero" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="complemento">Complemento</label>
                                    <input type="text" id="complemento">
                                </div>
                                <div class="form-group">
                                    <label for="bairro">Bairro *</label>
                                    <input type="text" id="bairro" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="cidade">Cidade *</label>
                                    <input type="text" id="cidade" required>
                                </div>
                                <div class="form-group">
                                    <label for="estado">Estado *</label>
                                    <input type="text" id="estado" maxlength="2" placeholder="UF" required>
                                </div>
                            </div>

                            <h3>Contatos</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="telefone">Telefone</label>
                                    <input type="tel" id="telefone" placeholder="(00) 0000-0000">
                                </div>
                                <div class="form-group">
                                    <label for="email">E-mail</label>
                                    <input type="email" id="email" placeholder="email@gmail.com">
                                </div>
                            </div>

                            <h3>Documentos</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="rg">RG</label>
                                    <input type="text" id="rg" placeholder="00.000.000-0">
                                </div>
                                <div class="form-group">
                                    <label for="cpf">CPF *</label>
                                    <input type="text" id="cpf" placeholder="000.000.000-00" required>
                                </div>
                            </div>

                            <h3>Filiação</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="nomePai">Nome do Pai</label>
                                    <input type="text" id="nomePai">
                                </div>
                                <div class="form-group">
                                    <label for="nomeMae">Nome da Mãe *</label>
                                    <input type="text" id="nomeMae" required>
                                </div>
                            </div>

                            <div class="btn-group">
                                <button type="submit" class="btn btn-primary" id="submitPessoaBtn">Cadastrar</button>
                                <button type="button" class="btn btn-danger" id="cancelPessoaBtn"
                                    style="display: none;">Cancelar</button>
                            </div>
                        </form>
                    </section>

                    <section class="table-container">
                        <h2>Lista de Pessoas</h2>

                        <div class="filters">
                            <div class="search-container">
                                <input type="text" id="searchPessoasInput" placeholder="Buscar por nome..."
                                    oninput="filtrarPessoas()">
                            </div>
                            <select id="filterBloodType" onchange="filtrarPessoas()">
                                <option value="">Todos os tipos</option>
                                <option value="A_POSITIVO">A+</option>
                                <option value="A_NEGATIVO">A-</option>
                                <option value="B_POSITIVO">B+</option>
                                <option value="B_NEGATIVO">B-</option>
                                <option value="AB_POSITIVO">AB+</option>
                                <option value="AB_NEGATIVO">AB-</option>
                                <option value="O_POSITIVO">O+</option>
                                <option value="O_NEGATIVO">O-</option>
                            </select>
                            <button class="btn btn-primary" onclick="carregarPessoas()">Atualizar</button>
                        </div>

                        <table id="peopleTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Tipo Sanguíneo</th>
                                    <th>Telefone</th>
                                    <th>Cidade</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="peopleTableBody">
                                <!-- Dados serão inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </section>
                </div>
            </div>

            <!-- DOAÇÕES -->
            <div id="tab-doacoes" class="tab-content">
                <div class="main-content-inner">
                    <section class="form-section">
                        <h2 id="doacaoFormTitle">Registrar Doação</h2>
                        <form id="doacaoForm">
                            <input type="hidden" id="doacaoId">

                            <div class="form-group">
                                <label for="documentoDoador">Documento do Doador (CPF) *</label>
                                <input type="text" id="documentoDoador" placeholder="000.000.000-00" required>
                                <small>Digite o CPF do doador cadastrado</small>
                            </div>

                            <div class="form-group">
                                <label for="quantidadeDoacao">Quantidade (ml) *</label>
                                <input type="number" id="quantidadeDoacao" min="450" step="50" value="450" required>
                                <small>Mínimo 450ml (1 bolsa)</small>
                            </div>

                            <div class="form-group">
                                <label for="dataDoacao">Data da Doação</label>
                                <input type="datetime-local" id="dataDoacao">
                            </div>

                            <div class="form-group">
                                <label for="validoAteDoacao">Válido até</label>
                                <input type="date" id="validoAteDoacao">
                                <small>Data de validade do sangue (padrão: 42 dias)</small>
                            </div>

                            <div class="btn-group">
                                <button type="submit" class="btn btn-success" id="submitDoacaoBtn">Registrar
                                    Doação</button>
                                <button type="button" class="btn btn-danger" id="cancelDoacaoBtn"
                                    style="display: none;">Cancelar</button>
                            </div>
                        </form>
                    </section>

                    <section class="table-container">
                        <h2>Doações Registradas</h2>

                        <div class="filters">
                            <div class="search-container">
                                <input type="text" id="searchDoacoesInput" placeholder="Buscar por documento..."
                                    oninput="filtrarDoacoes()">
                            </div>
                            <select id="filterStatusDoacao" onchange="filtrarDoacoes()">
                                <option value="">Todos os status</option>
                                <option value="DISPONIVEL">Disponível</option>
                                <option value="UTILIZADO">Utilizado</option>
                                <option value="VENCIDO">Vencido</option>
                            </select>
                            <button class="btn btn-primary" onclick="carregarDoacoes()">Atualizar</button>
                        </div>

                        <table id="doacoesTable">
                            <thead>
                                <tr>
                                    <th>Doador</th>
                                    <th>Tipo</th>
                                    <th>Quantidade</th>
                                    <th>Data</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="doacoesTableBody">
                                <!-- Dados serão inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </section>
                </div>
            </div>

            <!-- ESTOQUE -->
            <div id="tab-estoque" class="tab-content">
                <div class="main-content-inner">
                    <div class="card">
                        <h3>Estoque Atual</h3>
                        <div id="estoqueAtual" class="blood-type-grid">
                            <!-- Grid será preenchido via JavaScript -->
                        </div>
                    </div>

                    <div class="card">
                        <h3>Adicionar Doação ao Estoque</h3>
                        <div class="form-group">
                            <label for="doacaoParaEstoque">Selecionar Doação</label>
                            <select id="doacaoParaEstoque">
                                <option value="">Selecione uma doação disponível</option>
                            </select>
                        </div>
                        <button class="btn btn-success" onclick="adicionarDoacaoAoEstoque()">Adicionar ao
                            Estoque</button>
                    </div>

                    <div class="card">
                        <h3>Estatísticas</h3>
                        <div id="estatisticasEstoque">
                            <!-- Estatísticas serão preenchidas via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- DASHBOARD -->
            <div id="tab-dashboard" class="tab-content">
                <div class="quick-stats">
                    <div class="quick-stat">
                        <div class="number" id="totalEstoque">0</div>
                        <div class="label">Total em Estoque</div>
                    </div>
                    <div class="quick-stat">
                        <div class="number" id="totalDoadores">0</div>
                        <div class="label">Doadores</div>
                    </div>
                    <div class="quick-stat">
                        <div class="number" id="doacoesHoje">0</div>
                        <div class="label">Doações Hoje</div>
                    </div>
                    <div class="quick-stat">
                        <div class="number" id="alertas">0</div>
                        <div class="label">Alertas</div>
                    </div>
                </div>

                <div class="cards-grid">
                    <div class="card">
                        <h3>Estoque por Tipo Sanguíneo</h3>
                        <div id="estoqueChart" class="blood-type-grid">
                            <!-- Grid será preenchido via JavaScript -->
                        </div>
                    </div>

                    <div class="card">
                        <h3>Doações Recentes</h3>
                        <div id="ultimasDoacoes" style="max-height: 300px; overflow-y: auto;">
                            <table style="width: 100%;">
                                <thead>
                                    <tr>
                                        <th>Doador</th>
                                        <th>Tipo</th>
                                        <th>Data</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="doacoesRecentesTable">
                                    <!-- Preenchido via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Alertas de Estoque</h3>
                        <div id="alertasContainer">
                            <!-- Alertas serão preenchidos via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- COMPATIBILIDADE -->
            <div id="tab-compatibilidade" class="tab-content">
                <div class="main-content-inner">
                    <div class="card">
                        <h3>Verificar Compatibilidade</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="tipoDoador">Tipo do Doador</label>
                                <select id="tipoDoador">
                                    <option value="">Selecione</option>
                                    <option value="A_POSITIVO">A+</option>
                                    <option value="A_NEGATIVO">A-</option>
                                    <option value="B_POSITIVO">B+</option>
                                    <option value="B_NEGATIVO">B-</option>
                                    <option value="AB_POSITIVO">AB+</option>
                                    <option value="AB_NEGATIVO">AB-</option>
                                    <option value="O_POSITIVO">O+</option>
                                    <option value="O_NEGATIVO">O-</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="tipoReceptor">Tipo do Receptor</label>
                                <select id="tipoReceptor">
                                    <option value="">Selecione</option>
                                    <option value="A_POSITIVO">A+</option>
                                    <option value="A_NEGATIVO">A-</option>
                                    <option value="B_POSITIVO">B+</option>
                                    <option value="B_NEGATIVO">B-</option>
                                    <option value="AB_POSITIVO">AB+</option>
                                    <option value="AB_NEGATIVO">AB-</option>
                                    <option value="O_POSITIVO">O+</option>
                                    <option value="O_NEGATIVO">O-</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="verificarCompatibilidade()">Verificar</button>
                        <div id="resultadoCompatibilidade" class="compatibility-result hidden">
                            <!-- Resultado será exibido aqui -->
                        </div>
                    </div>

                    <!-- <div class="card">
                        <h3>Doadores Compatíveis</h3>
                        <div class="form-group">
                            <label for="tipoReceptorBusca">Buscar doadores para tipo:</label>
                            <select id="tipoReceptorBusca" onchange="buscarDoadoresCompativeis()">
                                <option value="">Selecione um tipo</option>
                                <option value="A_POSITIVO">A+</option>
                                <option value="A_NEGATIVO">A-</option>
                                <option value="B_POSITIVO">B+</option>
                                <option value="B_NEGATIVO">B-</option>
                                <option value="AB_POSITIVO">AB+</option>
                                <option value="AB_NEGATIVO">AB-</option>
                                <option value="O_POSITIVO">O+</option>
                                <option value="O_NEGATIVO">O-</option>
                            </select>
                        </div>
                        <div id="listaDoadoresCompativeis">
                             Lista será preenchida via JavaScript 
                        </div>
                    </div> -->

                    <div class="card">
                        <h3>Tabela de Compatibilidade</h3>
                        <div id="tabelaCompatibilidade">
                            <!-- Tabela será gerada via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>

</html>